# ap\_words：情報技術者試験シラバス用・用語抽出スクリプト

## 概要

このスクリプトは、情報処理技術者試験（応用情報技術者試験を想定）のシラバスから「用語例」を抽出し、AIが解説を生成するためのプロンプトテキストを作成します。単純に用語リストのみを出力することも可能です。

他のIPA試験シラバス（基本情報技術者試験など）も同様の形式であれば対応していると推測されますが、未確認です。
応用情報技術者試験のシラバス(用語例の塊) の「用語例」に続く用語郡を抽出し、用語解説をLLMに作ってもらうプロンプトテキストを作ります。単純に用語のみを出力する事もできます。
基本情報技術者試験等、他のIPA試験のシラバスにも対応してると思われます(未確認)。

## 主な機能

1.  **用語例の抽出**: シラバステキストから「用語例」のセクションを検出し、そこに記載された用語を自動的に抜き出します。
2.  **プロンプトテキストの生成**: 抽出した用語と見出し情報（例：「応用情報処理試験の出題範囲『AI』における『機械学習』について...」）を組み合わせ、AIに解説を依頼するためのプロンプトテキストを生成します。また、使用するプロンプトテキストの依頼文は選択できます。
3.  **出力形式**:
      * **`normal`**: シラバスの元の構成を保ちつつ、用語解説プロンプトを出力します。（デフォルト）
      * **`ask`**: 用語解説プロンプトのみを出力します。
      * **`dict`**: 抽出された用語のリストのみを出力します。

## 使用方法

1.  **シラバスファイルの準備**

公式シラバスPDFのテキスト内容をすべて選択してコピーし、プレーンテキストファイルとして保存します。ここでは例として `syllabus.txt` にコピーしたとします。

2.  **スクリプトの実行**

ターミナルで、ファイル名を指定してスクリプトを実行します。

```zsh
python3 ap_words.py syllabus.txt
```

出力は標準出力に対して行われるので、ファイルに保存するにはリダイレクトを使用します。

```zsh
python3 ap_words.py syllabus.txt > ap_words.txt
```

デフォルトでは、シラバスの他のテキストも一緒に出力されますが、後述するコマンドオプションで用途に合わせた出力が可能です。

3.  **LLMへのプロンプト利用**

出力されたテキストをエディタで開き、`_ask` で始まる段落をコピーして、ChatGPTやGeminiなどのLLMに貼り付けてください。

**`_ask` 形式のプロンプト例:**


3.  **出力されたテキストファイルの利用** : 出力されたテキストを、テキストエディタや Word や Google Document 等で開いてください。以下のような _ask で始まる行段落がありますので、それをコピペして LLM (ChatGPT や Gemini) に貼り付けてください。
```text
_ask
応用情報処理試験の出題範囲「AI（Artificial Intelligence：人工知能）に関する技術」における「ディープラーニング（深層学習）」について、
以下の用語の解説を、基本的に400文字以内、複雑な場合は最大700文字で、表形式でまとめてください。
文体は簡潔にするために、「だ・である」系や体言止めでお願いします。
ニューラルネットワーク
多層パーセプトロン
バックプロパゲーション（誤差逆伝播法）
勾配消失問題
活性化関数（ReLU 関数、ソフトマックス関数、tanh関数など）
ドロップアウト
(略)
```

以下 Gemini の回答例

| 用語 | 解説 |
| :--- | :--- |
| **ニューラルネットワーク** | 人間の脳神経回路を模したモデル。入力層、隠れ層、出力層からなり、各層のニューロンが重み付けされた信号を次の層に伝達することで情報を処理する。学習によって重みを調整し、パターン認識や予測を行う。|
| **多層パーセプトロン** | ニューラルネットワークの一種で、複数の隠れ層を持つモデル。入力層から出力層へ信号が一方向に伝播する順伝播型ネットワークであり、主に分類や回帰問題に用いられる。勾配降下法をベースとしたバックプロパゲーションにより学習する。|
| **バックプロパゲーション（誤差逆伝播法）** | ニューラルネットワークの学習アルゴリズムの一つ。出力層で得られた予測結果と正解との誤差を計算し、その誤差を逆方向に伝播させることで、各層の重みを効率的に更新する。これにより、ネットワーク全体の誤差を最小化する。|
| **勾配消失問題** | ニューラルネットワークの層が深くなるにつれて、バックプロパゲーションで伝播される勾配（重み更新の度合い）が非常に小さくなり、学習が進まなくなる問題。特に、シグモイド関数やtanh関数といった活性化関数を使用した場合に顕著になる。|
| **活性化関数** | ニューラルネットワークの各ニューロンの出力値を決定する関数。非線形性を導入することで、複雑なパターンを学習できるようにする。**ReLU関数**は負の値をゼロにし、正の値はそのまま通す。**ソフトマックス関数**は、分類問題の出力層で用いられ、各クラスの確率を算出する。**tanh関数**は、-1から1の範囲に出力を収める。|
| **ドロップアウト** | 過学習を抑制するための正則化手法。学習時に、ランダムに選択した一部のニューロンを一時的に無効化する。これにより、特定のニューロンに依存しすぎることを防ぎ、汎化性能を高める。|


## 実行方法

```bash
python ap_words.py [コマンド] <ファイル名> [オプション]
```

### 引数

  * `<ファイル名>`: **必須**。IPAシラバスのテキストファイル名を指定します。

### コマンド

  * `normal`: 通常モード。用語解説依頼のプロンプトを、シラバスの文中に展開します。文量は大きいですが、シラバスのどの部分に現れた用語なのか把握できます。（デフォルト）
  * `ask`: 用語解説依頼のプロンプトのみを出力します。目的としている用語が明確な場合は、こちらのほうが検索しやすくなります。
  * `dict`: 抽出された用語のリストのみを出力します。

### オプション

  * `-a`, `--ask <ファイル名 | 段落番号>`: AIへの依頼文（プロンプト）をカスタマイズします。
      * `<ファイル名>`: プロンプト文が書かれたテキストファイルを指定します。デフォルトでは ap_words_asks.txt が使用されます。
      * `<段落番号>`: 指定したファイル内の特定の段落番号をプロンプト文として使用します。（例：`-a 2`）複数回指定可能で、指定された段落をすべて追加します。プロンプト文を選びたい場合に使用します。

### コマンド例

1.  **シラバスからすべての用語とプロンプトを抽出する**
    ```bash
    python ap_words.py normal syllabus.txt > ap_asks.txt
    ```
2.  **用語リストだけを抽出する**
    ```bash
    python ap_words.py dict syllabus.txt > words_list.txt
    ```
3.  **プロンプト文の選択**
    ```bash
    python ap_words.py syllabus.txt -a 2 -a 3 > words_list.txt
    ```
    この例では段落2〜3を選んでいますが、以下のような出力となります。プロンプト文が|で仕切られているので適宜編集して LLMに入力してください。
    ```text
    _ask
    応用情報処理試験の出題範囲「AI（Artificial Intelligence：人工知能）に関する技術」における「ディープラーニング（深層学習）」について、
    以下の用語に関して、体系的な解説をお願いします。文体は「だ・である」系で、体言止めも使って構いません。
    |
    以下の用語に関して、初心者向けに体系的な解説をお願いします。
    ニューラルネットワーク
    多層パーセプトロン
    バックプロパゲーション（誤差逆伝播法）
    勾配消失問題
    活性化関数（ReLU 関数、ソフトマックス関数、tanh関数など）
    (略)
    ```
    回答例
    ```text
    ### ディープラーニングの基礎

    **ニューラルネットワーク**は、人間の脳の神経回路を模した機械学習モデル。入力層、隠れ層、出力層から構成され、各層のニューロンが重み付けされた信号を次の層に伝達することで、情報処理を行う。学習を通じて重みを調整し、データから複雑なパターンを抽出する。

    **多層パーセプトロン**は、複数の隠れ層を持つニューラルネットワークの一種。これにより、単層のモデルでは扱えない複雑な問題にも対応可能だ。主に分類や回帰問題に用いられ、誤差逆伝播法をベースに学習が進められる。
    (略)
    ```

### 注意事項

  - スクリプトが正しく動作するためには、入力となるシラバスファイルが**UTF-8形式**で保存されている必要があります。
  - **`FileNotFoundError`**: シラバスのテキストファイルへのパスが正しいことを確認してください。
  - **`BrokenPipeError`**: このエラーは、出力を`less`のようなコマンドにパイプすると、ap_words 側が出力を終える前に`less`が終了してしまった時などに出力できないというようなメカニズムで発生するようです。

## 作者

(c)2025 Junichiro Higuchi

## ライセンス

このプロジェクトは[MITライセンス](https://opensource.org/licenses/MIT)の下で公開されています。


